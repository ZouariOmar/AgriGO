\doxysection{/home/zouari\+\_\+omar/\+Documents/\+Daily/\+Projects/\+Agri\+GO/vendor/nesbot/carbon/src/\+Carbon/\+Traits/\+Mixin.\+php}
\hypertarget{_2home_2zouari_omar_2Documents_2Daily_2Projects_2AgriGO_2vendor_2nesbot_2carbon_2src_2Carbon_2Traits_2Mixin_8php-example}{}\label{_2home_2zouari_omar_2Documents_2Daily_2Projects_2AgriGO_2vendor_2nesbot_2carbon_2src_2Carbon_2Traits_2Mixin_8php-example}Mix another object into the class.


\begin{DoxyCode}{0}
\DoxyCodeLine{Carbon::mixin(\textcolor{keyword}{new}\ \textcolor{keyword}{class}\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ addMoon()\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{function}\ ()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>addDays(30);}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ subMoon()\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{function}\ ()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>subDays(30);}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\});}
\DoxyCodeLine{\$fullMoon\ =\ Carbon::create(\textcolor{stringliteral}{'2018-\/12-\/22'});}
\DoxyCodeLine{\$nextFullMoon\ =\ \$fullMoon-\/>addMoon();}
\DoxyCodeLine{\$blackMoon\ =\ Carbon::create(\textcolor{stringliteral}{'2019-\/01-\/06'});}
\DoxyCodeLine{\$previousBlackMoon\ =\ \$blackMoon-\/>subMoon();}
\DoxyCodeLine{echo\ \textcolor{stringliteral}{"{}\$nextFullMoon\(\backslash\)n"{}};}
\DoxyCodeLine{echo\ \textcolor{stringliteral}{"{}\$previousBlackMoon\(\backslash\)n"{}};}

\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
object | string & {\em \$mixin} & \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em Reflection\+Exception} & \\
\hline
\end{DoxyExceptions}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}

\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{<?php}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceCarbon_1_1Traits}{Carbon\(\backslash\)Traits}};}
\DoxyCodeLine{}
\DoxyCodeLine{use\ \mbox{\hyperlink{interfaceCarbon_1_1CarbonInterface}{Carbon\(\backslash\)CarbonInterface}};}
\DoxyCodeLine{use\ \mbox{\hyperlink{classCarbon_1_1CarbonInterval}{Carbon\(\backslash\)CarbonInterval}};}
\DoxyCodeLine{use\ \mbox{\hyperlink{classCarbon_1_1CarbonPeriod}{Carbon\(\backslash\)CarbonPeriod}};}
\DoxyCodeLine{use\ Closure;}
\DoxyCodeLine{use\ Generator;}
\DoxyCodeLine{use\ ReflectionClass;}
\DoxyCodeLine{use\ ReflectionException;}
\DoxyCodeLine{use\ ReflectionMethod;}
\DoxyCodeLine{use\ Throwable;}
\DoxyCodeLine{}
\DoxyCodeLine{trait\ \mbox{\hyperlink{namespaceCarbon_1_1Traits_a207b78e926a0ab853f96b34d9beb2981}{Mixin}}}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ \$macroContextStack\ =\ [];}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ mixin(\$mixin)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \(\backslash\)is\_string(\$mixin)\ \&\&\ trait\_exists(\$mixin)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ?\ self::loadMixinTrait(\$mixin)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ :\ self::loadMixinClass(\$mixin);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ loadMixinClass(\$mixin)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$methods\ =\ (\textcolor{keyword}{new}\ ReflectionClass(\$mixin))-\/>getMethods(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ReflectionMethod::IS\_PUBLIC\ |\ ReflectionMethod::IS\_PROTECTED}
\DoxyCodeLine{\ \ \ \ \ \ \ \ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$methods\ as\ \$method)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$method-\/>isConstructor()\ ||\ \$method-\/>isDestructor())\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$method-\/>setAccessible(\textcolor{keyword}{true});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ static::macro(\$method-\/>name,\ \$method-\/>invoke(\$mixin));}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ loadMixinTrait(\$trait)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$context\ =\ eval(self::getAnonymousClassCodeForTrait(\$trait));}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$className\ =\ \(\backslash\)get\_class(\$context);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \$baseClass\ =\ static::class;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (self::getMixableMethods(\$context)\ as\ \$name)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \$closureBase\ =\ Closure::fromCallable([\$context,\ \$name]);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ static::macro(\$name,\ \textcolor{keyword}{function}\ (...\$parameters)\ use\ (\$closureBase,\ \$className,\ \$baseClass)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$downContext\ =\ isset(\$this)\ ?\ (\$this)\ :\ new\ \$baseClass();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$context\ =\ isset(\$this)\ ?\ \$this-\/>cast(\$className)\ :\ new\ \$className();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ @\ is\ required\ to\ handle\ error\ if\ not\ converted\ into\ exceptions}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$closure\ =\ @\$closureBase-\/>bindTo(\$context);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (Throwable\ \$throwable)\ \{\ \textcolor{comment}{//\ @codeCoverageIgnore}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$closure\ =\ \$closureBase;\ \textcolor{comment}{//\ @codeCoverageIgnore}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ in\ case\ of\ errors\ not\ converted\ into\ exceptions}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$closure\ =\ \$closure\ ?:\ \$closureBase;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$closure(...\$parameters);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(\$result\ instanceof\ \$className))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$downContext\ instanceof\ CarbonInterface\ \&\&\ \$result\ instanceof\ CarbonInterface)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$context\ !==\ \$result)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$downContext\ =\ \$downContext-\/>copy();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$downContext}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setTimezone(\$result-\/>getTimezone())}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>modify(\$result-\/>format(\textcolor{stringliteral}{'Y-\/m-\/d\ H:i:s.u'}))}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>settings(\$result-\/>getSettings());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$downContext\ instanceof\ CarbonInterval\ \&\&\ \$result\ instanceof\ CarbonInterval)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$context\ !==\ \$result)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$downContext\ =\ \$downContext-\/>copy();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$downContext-\/>copyProperties(\$result);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self::copyStep(\$downContext,\ \$result);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self::copyNegativeUnits(\$downContext,\ \$result);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$downContext-\/>settings(\$result-\/>getSettings());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$downContext\ instanceof\ CarbonPeriod\ \&\&\ \$result\ instanceof\ CarbonPeriod)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$context\ !==\ \$result)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$downContext\ =\ \$downContext-\/>copy();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$downContext}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setDates(\$result-\/>getStartDate(),\ \$result-\/>getEndDate())}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setRecurrences(\$result-\/>getRecurrences())}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setOptions(\$result-\/>getOptions())}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>settings(\$result-\/>getSettings());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getAnonymousClassCodeForTrait(\textcolor{keywordtype}{string}\ \$trait)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'return\ new\ class()\ extends\ '}.static::class.\textcolor{stringliteral}{'\ \{use\ '}.\$trait.\textcolor{stringliteral}{';\};'};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getMixableMethods(\textcolor{keyword}{self}\ \$context):\ Generator}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (get\_class\_methods(\$context)\ as\ \$name)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (method\_exists(static::class,\ \$name))\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ yield\ \$name;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ bindMacroContext(\$context,\ callable\ \$callable)}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ static::\$macroContextStack[]\ =\ \$context;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$callable();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ array\_pop(static::\$macroContextStack);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ context()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ end(static::\$macroContextStack)\ ?:\ \textcolor{keyword}{null};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \textcolor{keyword}{this}()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ end(static::\$macroContextStack)\ ?:\ \textcolor{keyword}{new}\ \textcolor{keyword}{static}();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCodeInclude}
 